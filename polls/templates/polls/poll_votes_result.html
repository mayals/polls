{% extends 'base.html' %}




<!-- start inlclude  'message' -->
{% block messages %}
   {% include 'includes/messages.html' %}
{% endblock messages %}
<!-- END inlclude  'message' -->




{% block content %}
        
    <section  class="polls">
        <h1 class='poll-question'>{{ poll.poll_question }}</h1>
    </section>


    <section  class="polls">
        <div>
            <canvas id="myChart"></canvas>
        </div>
    </section>


    <section  class="polls">

        <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Info</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row"><i class="fa-solid fa-file-pen"></i>&nbsp&nbspPoll Created by:</th>
                <td>{{poll.poll_user.username }}</td>
              </tr>
              <tr>
                <th scope="row"><i class="fa-regular fa-hourglass-half"></i>&nbsp&nbspPoll Started at:</th>
                <td>{{poll.published_at }}</td> 
              </tr>
              <tr>
                <th scope="row"><i class="fa-solid fa-users"></i>&nbsp&nbspPoll's Number of voters:</th>
                <td colspan="2">{{poll.poll_voters_count }}</td>
              </tr>
            </tbody>
        </table>
        
    </section>

       

        <!-- https://www.chartjs.org/docs/latest/getting-started/ -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        
        <script>
            const ctx = document.getElementById('myChart');
        
            new Chart(ctx, {
                        type: 'bar',
                        data: {                         
                            labels: {{labels|safe}},
                            datasets: [{
                                    label: '# of Votes',
                                    data : {{data_count|safe}},
                                    borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                            }
                        }
            });


        </script>



  


{% endblock content %}